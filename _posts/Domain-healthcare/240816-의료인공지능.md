---
title: "의료 인공지능"
escerpt: "의료인공지능 기본이론 1"

categories:
  - healthcare
tags:
  - [AI, healthcare]

toc: true
toc_sticky: true

breadcrumbs: true

date: 2024-08-16
last_modified_at: 2024-08-16

comments: true
 

---
# 0. 의료인공지능이란 ? 

## 0-1. 의료인공지능 필요성
: 다양한 질환에 대한 임상결정보조시스템과 예측 시스템이 개발되면 개인 맞춤형 질병예방과 진단 치료를 제공하는 정밀의료 구현가능.

- 순환신경망(RNN)
: 의료현장에서 중환자실에 입원한 환자들의 실시간 생체신호 데이터를 이용하여 환자의 예후를 조기에 예측하는데 사용가능

- 디지털 병리
: 기존 조직에 대한 병리 검사를 현미경으로 보던 것을 넘어서서 고해상도의 이미지로 병리 조직을 판독하는 것을 의미.


# 1. 오픈 의료공개데이터

## 1-1. 북미영상의학회(Radiological Society of North America, RSNA)
- 2017~2021년까지 개최한 챌린지 데이터.

- 2021: (1) COVID-19 AI Detection, (2) Brain Tumor AI Challenge
- 2020: Pulmonary Embolism Detection Challenge
- 2019: Intracranial Hemorrhage Detection Challenge
- 2018: Pneumonia Detection Challenge- 22 
- 2017: Pediatric Bone Age Challenge

## 1-2. MIMIC-3(Medical Information Mart for Intensive Care)

- 미국 메사추세츠 보스턴에 위치한 Beth Israel Deaconess Medical Center에서 2001년부터 2012년까지 40,000명의 중환자실에 입원환자 기록을 MIT와 협업하여 공개용으로 만든 데이터셋.

- 중환자실에 입원한 인구통계학정보, 중환자실 치료과정에서 저장된 여러 가지 데이터(진단검사 결과, 처방 및 투약이력, 간호기록, 진단기록, 생체신호(바이탈사인) 정보, 처방 및 수술기록, 임상노트 및 사망여부 등)

- 심전도 등의 웨이브폼 형태의 생체신호 데이터, 흉부 X-ray데이터 등의 파생된 데이터도 제공.

- 개인정보 익명화 진행함(익명화:Deidentification)
    - 이름과 지역, 환자를 특정할 수 있을만큼 특수한 임상 케이스들은 모두 제거
    - 날짜와 관련된 모든 정보들은 특정한 규칙하에 임의의 숫자로 변경.

- 관계형 데이터베이스 형태로 데이터가 저장
    - 각 데이터는 MIMIC-3에서 정의한 분류대로 개별적인 표에 분리되어 저장되어 있음.(해당 분류 및 각 표의 컨텐츠는 공식문서 참조)

    - 입퇴원 시간, 위치 및 환자 개인정보, 사망시각등이 표기 된 데이터를 활용하여 입원테이블을 MIMIC-3의 다른 테이블과 어떤 연관성이 있는지도 확인 가능.

    - 데이터 검색은 SQL,구조화된 쿼리 언어를 통해 이루어짐.

- 접근방법
    - 1단계 ) PhysioNet 회원가입
    - 2단계 ) [CITI program이수](https://about.citiprogram.org/)
        - 기관을 "Massachusetts Institute of Technology Affiliates" 로 설정
    - Human Subjects training > Data or Specimens Only Research
    - Completion Report/Certificate 2파일을 MIMIC-3 project page에 제출 후 접근 권한 부여가능.(https://physionet.org/content/mimicIII/1.4/)

## 1-3. 필립스 eICU
- 필립스 전자의무기록시스템을 활용하는 다수의 미국 병원으로부터 수집한 의료 데이터
- 2014~2015년까지 수집된 총 166,000개의 중환자실 입원 기록들을 포함
- 바이탈사인, 검사결과, 처방 및 수술기록 및 사망 여부등을 포함.

- 차이점 : MIMIC-3 vs eICU

    - 각종 비정형 데이터(텍스트, 이미지)등이 누락
    - 진단 및 처방 기록에 기록시간이 표기
        - MIMIC-3는 퇴원시 일괄로 기록하므로 기록들의 시간이 전부 동일.
    - 한 환자가 여러번 입원한 경우를 추적 불가능
        - MIMIC-3는 환자ID와 입원ID가 별개로 존재하므로, 한 환자가 여러번 입원해도 계속해서 추적가능.

## 1-4. [PhysioNet](https://physionet.org/)

- the Research Resource for Complex Physiologic Signals의 별칭.
- 미 국립보건원(NIH)의 후원으로 1999년에 설립
- 생물의학 연구와 교육을 활성화하는것.
- 부분적으로는 대량의 생리학적, 임상 데이터 및 관련 오픈소스 소프트웨어에 대한 무료 액세스를 제공
- 매년 심장의학회와 협력하여 임상 및 기초과학의 미해결 문제에 대한 연구에 초점을 맞춘 챌린지를 개최
- MIT전산생리학 연구소 및 베스인스라엘 메디컬 센터에 의해 관리

## 1-5. 건강보험시사평가원의 공공데이터

- 의료 현장에서 보험 청구를 위해 건강 보험 심사 평가원에 보낸 자료들을 수집 후 배포
- 보험 청구 데이터 내에는 제공자 정보, 환자정보, 질병 및 처방코드, 계산서 등이 포함
- 그외의 EMR에 포함된 다른 정보들은 담겨있지 않음.
- 건강보험심사평가원에 접근 신청 후 승인이 완료 되면, 유료로 이용 가능한 서비스

# 2. 의료영상데이터 : X선

## 2-1. X선 영상장치의 원리

- X선의 실체는 우리가 보는 가시광선과 같은 광자, 빛이다.
- 이 광자나 빛은 에너지에 따라 파동 또는 입자의 특성을 가지게 된다.

| 구분 |주파수대역|X선|
| :---: |:---:|:---:|
| 사용처 |라디오,핸드폰에서 사용|의료영상기기에서 사용|
| 특성 |파동으로서의 특성이 강함|1. 높은 에너지를 가지고 있어 입자로서의 특성이 강함 2.인체를 투과하여 검출가능|
| 성질 |건물로 막힌곳을 돌아가거나 동시에 여러 곳에서 같은 신호를 주고 받음|직진하는 성질이 있음|


## 2-2. X선 영상장치 구조

: 발생장치와 검출기로 되어있다.

### 2-2-1. 발생장치
: 전자가 운동량이 변하게 되면 에너지 보존법칙에 따라 이에 따른 X선이 발생하게 되는 원리로 동작.

![image](https://github.com/user-attachments/assets/0e1cce17-ef74-48a4-8d41-995c3f8025b2)


- 음극과 양극에 전압을 걸어주게 되면, 음극에 있는 전자들이 양극 방향으로 가속하게 됨.
- 가속된 전자들은 양극을 구성하는 금속에 부딪혀 X선을 발생
- 양극에 주로 사용되는 금속은 텅스텐이며 60~70kV를 갖는 X선들이 많이 발생함.

* ? 전기회로에서 전자의 흐름은 음극(-)에서 양극(+)으로 진행됨.


![image](https://github.com/user-attachments/assets/75ddb447-87ab-491c-96f1-01395b73e281)

- 이때, 발생하게 되는 X선은 단일 에너지가 아닌 넓은 대역을 가지게 됨.
- 음극과 양극에 걸어준 전압의 크기에 따라 X선을 가진 에너지의 분포가 변화함.
- 큰 접압인 경우, 더 큰 에너지를 가진 X선이 발생할 수 있음. 또한,X선의 양 자체도 증가

- 의료에서 사용되는 X선 영상 기기는 전압(kV)과 전류(mAs)를 조정하여 진단목적에 맞는 영상을 얻게 됨.

![image](https://github.com/user-attachments/assets/16831156-632a-4beb-acae-ea8dc45c3c2d)

- 많이 사용되는 전압은 80~140kV이다.


- X선 영상에서는 인체를 구성하고 있는 물질들, 감쇄계수가 다른것을 이용함.

    ![image](https://github.com/user-attachments/assets/49f9a0aa-aa4a-4f7a-818d-aeb969c6e769)

    - 지방과 근육은 에너지가 커짐에 따라 점점 차이가 줄어든다.
    - 실제 X선 영상에서 주로 사용하는 120kV영역에서는 차이가 크지않아 구별이 어려움.
    - 요오드(Iodine)는 감쇄계수가 다른 물질보다 커서 X선을 이용한 영상에서는 조영제로 많이 사용

        * 조영제 : 영상진단 검사 또는 시술 시 특정 조직이나 혈관이 잘 보이도록 인체에 투여하는 약물

- X선이 인체를 투과하면서 감쇄된 에너지는 어디로 갈까?
    - 대부분은 인체에 축적됨.
    - 광전효과에 의해 이온화된 원자들은 세포내의 DNA와 같은 미세구조를 바꾸기도 하고, 심하면 세포를 파괴하기도 함.
    - X선은 인체에 유해하다고 알려져있음.

        - 방사선량 관리를 위해 사용하는 단위는? 
            - Sv(시버트) : 인체 단위 질량당 받는 에너지로 정의
            - 흉부 X선 촬영시 0.1 mSv
            - 유방영상 촬영시 0.4-0.5 mSv 정도의 방사선량이 환자에게 가해짐.

#### 2-2-1-1.  감쇄현상

- 발생된 X선은 인체를 투과하며, 2가지 작용에 의하여 그 숫자가 줄어들게 됨.주로 **광전효과**로 인해 나타나며, **콤프턴 산란**이라는 현상도 관여할수 있음.

    1. 광전효과 : 인체를 구성하고 있는 물질의 원자를 돌고 있는 전자들이 이 X선을 흡수하여 사라지는 현상

        ![image](https://github.com/user-attachments/assets/f77a2519-860f-44c6-8691-a74c86c726d7)

        - 광전효과는 물질을 구성하고 있는 원자량의 세제곱에 비례하고, 에너지의 세제곱에 반비례하여 나타남.
        - 특히, 원자량이 큰 칼슘에서 크고, 물과 단백질에서 작게 나타남.

    2. 콤프턴 산란 : X선의 에너지가 증가함에 따라 조금씩 감소하는 경향.



### 2-2-2. 검출기


## 2-3. 흉부 X선 검사(chect X-ray)

: 1000명의 환자당 1년에 평균 236회의 흉부X선 검사를 촬영, 전체 영상의학 검사의 25% 차지

- 표준촬영 방식

    ![image](https://github.com/user-attachments/assets/6767a653-e07d-4383-9613-fe24cb4a5a63)

    - X선 발생장치와 거리를 180cm이상으로 두고, 누워있는 상태에서는 1M 허용으로 진행
    - 노출시간은 40msec이하에서 고전압 120-150kV으로 촬영

    ![image](https://github.com/user-attachments/assets/f303a883-d024-4d17-82eb-f3fbf116b50c)

    - 일반적으로 후전촬영과 측면촬영이 이루어짐.
    - 환자가 서서 후전촬영 할 수 없는 경우에는 누워 있는 상태에서 전후사진을 얻음.

### 2-3-1. 사용 예 : 폐

    - 폐는 공기가 차 있는 장기.
    - X선 영상에서 검게 나타나며, 폐병변의 경우에는 연조직 음영으로 나타나므로 폐 병변을 검출하기에 용이

## 2-4. 유방촬영술(mammography)

- 유방 ? 
    - 유방조직과 미세석회화 영역이 지방에 둘러싼 형태
    - 유방조직과 지방영역을 잘 구분하는것이 유방영상에서 중요!
    - 그러기 위해서는 보다 작은 에너지를 가진 X선을 이용하는 것이 유리.
    - 따라서, 흉부 X선 검사에서 사용되는 텅스텐을 사용하지 않고 **몰리브덴**을 이용

        * 몰리브덴? 17.5-19.5 kV을 가진 X선을 주로 발생시킴.

### 2-4-1. 유방촬영 방법

![image](https://github.com/user-attachments/assets/e643f97b-1560-44c0-bfe3-b54be83c1e81)

- CC(CranioCaudal)영상 : 유방을 위에서 아래로 압착하여 찍는 법
- MLO(MedioLateral Oblique)영상 : 안쪽과 바깥쪽을 비스듬히 압박하여 찍는 법 

## 2-5. X선 영상 오픈 데이터셋

- [MURA](stanfordmlgroup.github.io/competitions/mura)
    - X선은 근골격계 이상을 보는 일차적인 영상법으로 사용
    - 스탠포드대학에서 공개한 근골격계 X선 영상 데이터베이스는 총 40,561 장 영상으로 구성
    - 팔꿈치, 손가락, 손, 상완골, 팔뚝, 어깨, 손목 부위를 포함하고 각 부위별로 정상과 비정상을 구분

- [ChestX-ray 14](kaggle.com/nih-chest-xrays/data)
    - 미국보건원에서 공개한 흉부X선 데이터베이스
    - 총 30,805 명의 환자로부터 얻어진 112,120 장의 흉부X선 영상으로 구성
    - 판독문으로부터 자연어처리 기법을 이용하여 추출된 14개 질환으로 구분된 레이블이 제공

- [CheXpert](stanfordmlgroup.github.io/competitions/chexpert)
    - 스탠포드 대학에서 공개한 흉부X선 데이터베이스
    - ChestX-ray 14과 같은 14개 질환에 대해 레이블되어 있음
    - 64,540명의 환자로부터 얻어진 223,414 장의 흉부X선 영상으로 구성

- [DREAM challenge](www.synapse.org/igital_Mammography_DREAM_Challenge)
    - 유방암 검진 데이터
    - 총 8만명의 여성으로부터 얻어진 64만장 이상의 유방영상으로 구성

- [PERFORMS challenge](performs.grand.challenge.org)
    - 영국에서 국가 검진 데이터로부터 얻어진 천만장 이상의 유방영상 증례를 포함

## 2-6. X선 영상 전처리 기법

### 2-6-1. 전처리 ? 

입력데이터가 갖는 값의 범위를 0 ~ 1 또는 -1 ~ 1 로 갖도록 하는 정규화과정(normalization)이 필요. 

### 2-6-2. 전처리 과정

- step1) 기기로부터 얻어지는 영상의 크기를 인공지능 모델이 처리할 수 있는 수준으로 바꾸는 작업

- step2) 영상값을 목적에 맞게 변환

![image](https://github.com/user-attachments/assets/874c049a-6ece-422d-bbc4-32f6ed570312)

- 흉부X선 영상을 예로 살펴보면 폐 영역에서 질환을 검출하고자 하는 경우, 어두운 영역이 잘 보이도록 변환할 수 있음.

- 심장 영역의 인공물을 찾고자 한다면 이와 반대로 밝은 영역이 잘보이도록 변환.

- 방법 1) 히스토그램 평활화? 
    - 영상 값이 갖는 히스토그램에서 개조를 모든 영상 값에 대해 같게 맞추는 기법으로 일반적으로 보다 선명하게 보이는 특징이 있음.
- 방법 2) 감마조정
    - 감마값을 조정하여 어두운 여역, 특히 폐 영역을 더 잘보여줄 수 있는 특성을 가지고 있음.

    ![image](https://github.com/user-attachments/assets/37043772-bb70-4c22-93fd-4b82563d9da9)

- 이 둘을 함께 사용하면 X선 영상을 인공지능 모델학습에 적합하도록 전처리 수행가능.


# 3. 의료영상데이터 : CT

: CT검사는 일반 X선 촬영보다 인체 내부 구조를 정화하게 보여줌. 그래서 인체의 이상 유무와 질환을 파악하는데 효과적!

- 활용역역
    - 인체의 이상 유무, 이상부위의 검출, 병변의 정량화 및 세분화, 병변의 예후예측 등 병의 진단에서부터 치료예후 예측까지 활용가능.

## 3-1. CT장치의 구성

: 아래 4가지장치로 구성되어 있음.

- 목적 : "최소의 선량"으로 정밀한 진단이 가능한 고화질의 영상을 구현하는것.
    - 최소의 선량을 위해 최근의 CT는 **자동 관전류 기법**을 사용
    - 환자의 윤곽과 장기의 방사선 투과도를 고려해 영상의 질을 유지하면서 최적의 관전류를 조사해 방사선량을 최소화

* CT영상의 화질과 방사선 피폭선량에 영향을 미치는 기술적인 요소?
    - 촬영단면의 두께, 관전압, 관전류, 조사야, 환자의 위치 등

1. X-선 발생장치 : 아래 4가지로 구성
    - 전자원(electron source) : 전자빔을 만들수 있음.
    - target : 가속된 전자빔을 급속히 감소시킬수 있음
    - X-선 튜브 : 전자빔이 움직이는 공간인 진공용기로 구성된 X-선 튜브
    - 전원 및 제어장치 : 구동을 위한 전원 및 제어장치

        ![image](https://github.com/user-attachments/assets/6d4f6633-a05d-462e-aafd-edb7be1d6d4e)

        - 발생되는 X선의 에너지가 클수록 투과 능력도 커짐.
        - 높은 전압으로 가속된 전자빔에 의해 발생된 X선이 상대적으로 더 높은 투과 능력을 가짐.

2. 데이터 수집장치 : 아래 2가지로 구성
    - 검출기(detector) : X-선 발생 장치에서 조사된 X-선은 인체의 여러 조직에 의해 부분적으로 감쇠됨.
    - 데이터 수집부(DAS, data acquisition system) 
        - 검출기와 컴퓨터 사이에 위치.
        - 검출기에서 변환된 전기적 신호를 증폭하고 증폭된 신호를 디지털 영상 신호로 변환하는 역할
        - 변환된 데이터는 영상 재구성을 위해 영상 구성장치로 보내짐
3. 영상 구성장치
    - 데이터 수집 장치에서 얻은 2차원 영상들을 3차원 영상으로 재구성하기 위한 장치

    ![image](https://github.com/user-attachments/assets/33ef4995-4f26-4baf-9cc9-6bcb8474c6a2)

    - 인체의 여러 각도에서 투과된 X선은 데이터 수집장치에서 일련의 투영 영상으로 변환되고 영상 구성 장치에서 3차원 영상으로 재구성됨.

        * 투영 영상으로부터 원래의 이미지를 재구성하는 기술이 핵심.

        - 역투영법(back projection) 과 필터보정역투영법(filtered back projection)
            ![image](https://github.com/user-attachments/assets/855ea2e4-950f-47fe-8d35-2aeb89d9674b)


            - 각 방향에서 얻어진 투영 영상의 값을 거꾸로 되돌려서 합산하는 역투영법을 통하여 3차원 영상이 재구성됨.

            - 역투영법에서 필연적으로 발생하는 번짐(blur)을 보정하기 위하여, 투영 영상에 대해 필터처리 후 역투영하는 **필터보정역투영법(filtered back projection)**이 사용됨.


4. 디스플레이 장치
    - 영상 구성 장치에서 만들어진 3차원 영상은 모니터에 출력
    - 3차원 영상을 가시화하는 방법

        ![image](https://github.com/user-attachments/assets/b42c226b-fc5c-4211-8741-da4d3517b397)

        1. 복수평면 재구성(NPR, multi-planar reconstruction)
        2. 최대강도투영(MIP, maximum intensity projection)
        3. 직접볼륨렌더링(DVR, direct volume rendering)
        
## 3-2. CT 영상 데이터 특징

: X선의 투과와 인체의 각 부분에서의 흡수 차이를 이용하여 획득한 CT영상 데이터

- HU(Hounsfield unit)
: 투과된 X선의 강도를 정량적으로 표현한것.

    ![image](https://github.com/user-attachments/assets/5cba86aa-b25f-42c7-ae61-7e42f3962f3a)

    - 기증 물질인 물을 0, 공기를 -1,000, 뼈를 +1,000으로 정하고 인체의 조직의 선감약계수를 -1024 ~3071 범위로 나타낸 값. 

    - CT영상 데이터는 12bit의 HU값에 의해서 표현되어 DICOM형식으로 저장됨.

- Windowing

    - 의료 영상은 12bit의 단일 채널 gray level 영상인데 비해, 영상출력장치인 모니터는 8bit의 RGB의 3채널 영상을 출력함.
    - 의료영상을 영상 출력장치가 표현할 수 있는 대조도로 대응시켜주기 위하여 변환하는 과정이 필요한데 이 **선형 변환**을 Windowing이라고 함.


    ![image](https://github.com/user-attachments/assets/703b5575-0d55-4a0a-9a9a-f06a4cd43d11)

    - 영상에서 표현하는 HU의 범위를 제한하고, 그 중심을 조절하여 다양한 HU범위와 다양한 대조도로 CT영상 데이터를 출력하여 볼 수 있음.

- CT 영상에서의 artifacts(인공물)
    - partial volume averaging
        : 조직이 CT의 한 voxel로 표현되어 해당 voxel에 포함되는 조직의 평균값으로 선감약계수를 생성할 때 발생되는 artifact로 해상도에 영향을 받음

        ![image](https://github.com/user-attachments/assets/dcd88129-bcb3-4fec-b4d0-59bcf68b0f1e)

    ![image](https://github.com/user-attachments/assets/740e9508-3bb4-4710-a8cf-abd91fe99a9f)

    - beam hardening : X-선이 조직을 통과할 때 고에너지 양자보다 저에너지 양자의 감쇄가 크기 떄문에 발생하는 artifact
    - motion artifacts : 피험자의 움직임에 의해 발생하는 blurring
    - metal artifacts : 금속과 같은 고밀도의 인공물에 의해 발생하는 artifact


# 4. 의료영상데이터(MRI)
: 강한 자기장 발생을 통해 인체의 단체현상을 얻는 자기공명영상

- 근육이나 인대와 같은 연부조직의 해상도와 대조도가 좋음.
- 조양자와 같은 특별한 약물 없이도 고해상도 혈관 영상을 찍을수 있음.
- 뇌신경계 영상에서 뇌경색 질환 진단 및 경과 관찰에 적합
- X-선 촬영 및 CT와 달리 인체에 무해함.

## 4-1. MRI의 획득 원리

- 생체 조직의 자기적 성질을 이용
- 양성자의 세차운동

    ![image](https://github.com/user-attachments/assets/0530b8da-466a-4d29-b3f8-70eb95515803)

    - 사람의 몸 = 물, 많은 수소원자가 존재, 모든 수소원자 안에는 양성자가 팽이처럼 축을 중심으로 자전을 함(양성자의 세차운동)
    - 이 자전이 각각 작은 자기장을 발생시키는데, 이로 인해 N극와 S극이 생김.

    - 초전도 자석에 의한 강한 자기장 생성
        ![image](https://github.com/user-attachments/assets/aafa3c71-27a3-45bd-b00e-ea69d2485994)

        - (왼쪽) 평상시 / (오른쪽) 초전도 자석에 의한 강한 자기장 생성 
        - 평상시에 양성자들은 임의의 축으로 자전을 함.
        - 초전도 자석으로 강한 자기장을 발생시키면 양성자의 자전축이 자기장과 평행한 방향으로 정렬됨. 
        - 이때, 특정 라디오주파수의 전자파를 조사.
        ![image](https://github.com/user-attachments/assets/c65d925a-cd19-4a4e-934f-efdbafe02fee)

            - 고주파를 내보내면 낮은 에너지 배열을 이룬 양성자들이 고주파의 에너지를 흡수하고, 회전축을 뒤집어서 높은 에너지 배열로 돌아섬.

            - 조사되던 고주파가 멈추면, 양성자가 흡수했던 에너지를 방출하고 원래 배열로 돌아가게됨. 이때 발생한 에너지가 신호가 되어 **스캐너를 통해 영상화**하는 것이 MRI이다.
        
        - MR스캐너로 되돌아오는 신호의 크기
            - 조직의 수소원자 농도, T1 및 T2 이완시간, 혈류 등에 의해 좌우됨.
                * 이완(relaxation) : 양성자가 RF pulse의 에너지를 흡수한 뒤, 에너지를 방출하면서 원래 상태로 돌아오는 것으로 MRI 대조도를 결정하는 중요한 개념으로, T1 이완과 T2이완으로 구분할 수 있음.

## 4-1 MRI vs CT

|MRI|CT|
|:---:|:---:|
|고자기장과 고주파를 이용한 영상 획득으로 방사선 피해 없음| X-선을 투과하여 영상을 획득하므로 최소의 방사선 피폭선량으로 고화질 영상을 얻는것이 중요|
|연부조직(근육,인대 등) 의 해상도와 대조도가 좋으며, 병리학적 구조 관찰용이|해부학적 구조 관찰이 용이하여, 장기(흉부 및 복부) 및 뼈(골절)의 검사에 유용|
|영상의 기법에 따라 영상의 명암 달라짐|조직의 밀도가 영상의 명암 결정|
|영상획득 시간 30~50분|영상획득 시간 10~15분|

# 5. 의료영상데이터(병리데이터-디지털병리)

- Frost & Sullivan은 글로벌 디지털 병리학 시장 확대할 AI기반 이미징 분석툴과 클라우드 기반 구현 보고서(AI-based Image Analysis Tools and Cloud-Based Deployment to Expand the Global Digital Pathology Market )를 2021년 04월에 발표함.

## 5-1. 디지털병리의 개념

- 디지털 병리 : 디지털화된 이미지의 탐색(detection), 분할(segmentation), 진단(diagnosis), 분석(analysis)을 위한 인공지능 기반 접근 방식
- 컴퓨터 병리학 : AI방법을 사용하여 다양한 관련 소스의 병리학적 이미지와 메타데이터를 결합하여 환자 검체 분석
    - ex) AI를 이용한 유방암의 림프절 전이 탐지 알고리즘
- 디지털 병리 시스템 : 고배율 디지털 영상으로 변환하여 컴퓨터 화면으로 보면서 병리학적 진단을 하는 시스템

## 5-2. 디지털 병리 시스템의 구성요소

1. 슬라이드 스캐너
    - 유리슬라이드에 담긴 조직의 전체 형상을 최소 200배 이상의 고배율로 스캔하여 디지털 영상으로 변환

    * 최신 고사양 스캐너 
        - 슬라이드 한장을 스캔시 1분정도 소요
        - 디지털 이미지의 파일 크기는 대략 1GB(1.5x1.5mm^2기준)  
2. 이미지 뷰어
3. IT 인프라 및 통합
    - 매우 큰 용량의 저장서버 필요
        - ex) 서울아산병원 : 슬라이드 한 장당 2GB정도, 2019년 80만여 장의 슬라이드 생성.
    - 고속 데이터 통신망
    - 시스템 간의 통합 : EMR(임상정보), PACS(영상정보) 등의 다른 시스템들과 소통

* 최근의 암치료의 목표는 **정밀의료**이다( 환자 개인인 별로 최선의 치료제를 선택, 치료효과예측)

- 빅데이터 구축 
    - 이미지 데이터를 스토리지 서버에 저장해 활용

## 5-3. 디지털병리 데이터의 특징

1. 초고해상도 이미지
    - 사람을 구별하거나 물체를 인식할때 수백킬로 픽셀크기로도 충분
    - 그러나, 의료이미지는 일반데이터보다 더 커야한다.
    - 문제가 되는 부분을 찾아내는것이 매우 중요하므로 해상도가 높아야 함.
        - ex) X-ray 이미지
            - **메가픽셀** 단위의 이미지 필요
            - 영상의학과 전문의의 관찰과 판독
    - 병리진단 시 **기가픽셀** 크기의 이미지가 필요.

# 6. 의료영상데이터(안과영상)
- 안저검사
    - 눈 안쪽 혈관, 시신경, 황반 등으로 구성된 안저 상태를 확인하는 검사
    - 비침습적으로 인체 내 혈관을 직접 관찰할 수 있는 유일한 방법

    - 안저영상을 학습하여 망막질환 진단 및 예측연구 진행 활발.
    - 안저 영상에서 보이는 주요한 랜드마크(혈관, 시신경, 황반 등)의 변화의 전신 질환의 연구성에 대한 연구 진행

## 6-1.눈의 해부학적 구조 및 기능 설명

1. 해부

    ![image](https://github.com/user-attachments/assets/4385fe05-2339-483c-ab23-d338a79ee9b7)

    - 눈의 내부 조직은 안구의 바깥에서 안쪽의 순서로 크게 세 종류의 막으로 나뉨
    - 섬유막, 포도막, 망막으로 구성
    - 섬유막 : 무혈관성 섬유층으로, 투명한 조직인 각막과 흰색을띄고 있는 공막으로 이루어져 있다. 
    - 포도막 : 앞쪽에 홍채와 뒤쪽에 맥락막을 포함하며 풍부한 혈관성 조직으로 눈에 산소와 영양분을 공급한다. 
    - 망막 : 빛의 자극을 받아들이는 시세포가 넓게 분포되어 있으며 망막 중 보고자 하는 상이 도달하는 중심 부분을 황반이라고 한다. 
    - 눈의 안쪽에는 방수, 유리체액으로 채워져 있으며, 렌즈에 해당하는 수정체가 가운데에 위치

2. 기능

    - 눈은 시각 정보를 뇌에 전달하는 시각기관
    - 눈의 가장 앞에는 각막이 있고, 각막은 빛을 통과해서 모으는 역할을 한다. 
    - 눈동자 안에 눈동자의 색을 결정하는 홍채가 있고, 홍채가 수축하고 이완하면서 동공의 크기를 조절하면 눈 속으로 들어오는 빛의 양을 조절합니다. 
    - 홍채 바로 뒤에 있는 볼록렌즈 모양의 수정체는 카메라의 렌즈 역할을 하는 물질로 눈과 물체의 거리에 따라 두께가 조절이 되면서 피사체에 정확한 초점을 맞추는 역할을 한다. 
    - 눈에 들어온 빛은 각막을 통과해서 수정체를 지나고 유리체를 통과해서 망막에 상이 맺히게 되고, 시세포와 시신경을 통해 빛 자극이 전기신호로 전환이 됨. 
    - 이후 이 전기신호는 뇌로 전달되어서 우리는 물체를 시각적으로 인식하게 됨
 
## 6-2. 안과 영역의 의료 영상 종류 및 특징

: 안과 영역의 대표적인 의료 영상으로 안저사진, 빛간섭단층촬영, 형광안저조영술이 있다.
### 6-2-1. 안저사진/광각안저사진 (Fundus photography, Wide fundus photography)

![image](https://github.com/user-attachments/assets/9abf115f-718c-4bb8-9587-f70c5fb89f33)

- 안저사진은 동공을 통해 카메라로 눈의 안쪽 안저를 관찰하는 검사 방법 
- 안저사진을 통해 관찰할 수 있는 부분은 황반, 망막혈관, 시신경유두, 맥락막 등이다. 녹내장, 다양한 망막 질환 등 여러 안 질환의 진단 및 상태 확인에 사용된다. 
- 과거에는 안저 전반을 보려면 여러장을 찍어 합성했지만, 근래에 광각안저검사가 개발된 후 한 장으로 전체 망막의 범위에 해당하는 안구의 약 200도 범위에 해당하는 망막 주변부까지 광범위한 안저 전반을 관찰할 수 있다.

### 6-2-2. 비정상소견

- 나이관련황반변성

    ![image](https://github.com/user-attachments/assets/7b14746a-9f93-4468-bae2-b735a1657a70)

    - 나이관련황반변성은 65세 이상의 환자에서 법적 실명을 일으키는 가장 흔한 원인인 매우 중요
    한 질환
    - 비신생혈관성(비삼출성,건성)황반변성과 신생혈관성(삼출성,습성) 황반변성으로 나눌 수 있음
    - 나이관련황반변성의 진행은 안저검사에서 보이는 색소이상의 정도와 밀접하게 관련되어 있음.
    - 안저검사 상 황반부에 노란 비정형 침전물인 드로젠이 주로 관찰되며, 신생혈관이 생긴 경우 망막하출혈로 백색 혹은 적색의 출혈이 관찰되고 혹은 암녹색의 신생혈관 병변이 관찰됨.

- 당뇨망막병증

    ![image](https://github.com/user-attachments/assets/1f2bd8ea-61cd-420d-823b-45b1c01b58bd)

    - 당뇨망막병증은 당뇨에 의한 미세혈관 합병증으로 망막의 혈관 순환 장애를 일으킴
    - 망막병증은 질환의 중증도에 따라 비증식당뇨망막병증과 증식당뇨망막병증으로 분류
    - (오른쪽)안저 사진에서 선홍색 혹은 적색으로 보이는 미세혈관류 혹은 출혈은 당뇨망막병증에서 가장 먼저 관찰할 수 있는 소견
    - 경성삼출물 :  모세혈관에서 지단백(lipoprotein)이 세포외공간으로 누출되어 침착된 것으로 경계가 분명한 흰색 혹은 노란색으로 관찰됨.
    - 면화반 혹은 연성삼출물 :  경계가 모호한 깃털 모양의 흰색 혹은 노란색으로 관찰되며, 모세혈관 허혈로 인해 발생함.(오른쪽 사진, 비증식당뇨망막병증). 
    - (왼쪽) 증식당뇨망막병증에서는 신생혈관과 동반된 섬유화증식, 적색의 유리체출혈 등의 소견을 관찰할 수 있음. 
    - 진행된 당뇨망막병증의 치료로 범망막광응고레이저술을 시행하고 있으며 레이저를 받은 후 레이저 응고반 (burn)이 생기며 안저검사에서 이를 확인 가능(왼쪽 사진, 증식당뇨망막병증).

- 녹내장

    ![image](https://github.com/user-attachments/assets/a2083126-c06f-4cd0-abfe-3b12a6ad3855)

    - 녹내장은 특징적인 시신경 손상 및 시야 결손을 일으키는 진행성 시신경 병증. 
    - 녹내장 진행이 시신경에 영향을 미침으로써 나타나는 가장 특징적인 구조적 변화는 시신경유두 의 변화. 
    - 시신경유두 가운데의 함몰 (cupping)이 깊고 크며, 진행된 녹내장에서 시신경 유두테두리의 패임, 국소적인 창백이 관찰됨

- 망막박리

    ![image](https://github.com/user-attachments/assets/0c70329a-71b4-4666-9e45-bc6e14cf04b9)

    - 망막박리는 신경망막이 망막색소상피로부터 분리된 것을 말함.
    - 가장 흔한 형태는 전층 망막 열공의 결과로 생기는 열공성망막박리. 
    - 망막열공을 통하여 액화된 유리체가 망막하공간으로 이동하게 된다. 
    - 망막열공의 위치가 망막의 주변부에서 보다 흔하기 때문에 황반부에 집중된 안저사진보다 광범위한 병변을 관찰할 수 있는 광각안저사진이 진단에 도움이 됨.

- 매체혼탁 (백내장, 각막혼탁 등)

    ![image](https://github.com/user-attachments/assets/3c235761-afee-494c-a3dd-db81aa0907c0)

    - 각막혼탁, 진행된 백내장, 백색백내장, 안구 내 종양, 유리체 출혈 등으로 안저 관찰이 불가능
    한 경우 안저 사진은 위와 같이 뿌옇게 혹은 하얗게 찍히게 됨


## 6-3. 빛간섭단층촬영 (Optical Coherence Tomography, OCT)


- 빛간섭단층촬영(OCT)

    ![image](https://github.com/user-attachments/assets/f9fc6eb1-8e93-45eb-98c6-8f0304f18387)

    - 눈에 빛을 투과하였을 때 빛이 반사되어 돌아오 시간 차가 만드는 빛 간섭현상을 단층으로 촬영해서 보는 방법
    - 이 검사를 통해 눈 속에 있는 여러 구조물들의 단면을 관찰 가능
    -  빛간섭단층촬영으로 망막박리나 황반부종과 같은 황반부의 병변을 2차원적으로 확인할 수 있어 망막 단면의 변화를 시간 경과나 질병 진행에 따라 관찰할 수 있다.
    - 2차원 단면 이미지를 이용해 3차원 입체영상을 구성하거나 황반의 영역별 두께와 용적을 구할
    수 있다. 
    - 하지만 각막혼탁, 백내장, 유리체출혈 등의 매체혼탁으로 인해 빛이 안구 내로 잘 도달하지 못하는 경우 양질의 영상을 얻기 어렵다. 
    - 신호의 강도가 일정 수준 이상 유지되어야 영상을 신뢰할 수 있으므로, 기계에서 제공하는 영상의 질에 대한 변수와 수준을 알고 있어야 한다.
    - 황반부 빛간섭단층촬영에서 망막의 위쪽은 유리체강으로 검은색으로 보이며 아래쪽은 맥락막을 나타낸다. 
    - 황반부 망막은 여러층으로 구분되어 보이며, 흰색으로 표시되는 고반사도를 나타내는 망막의 층은 망막색소상피층, 시신경섬유층, 광수용체내외절경계 등이며, 검은색으로 표시되는 저반사도를 나타내는 층은 신경절세포층, 속핵층, 바깥핵층 등이다.
 
### 6-3-1. 비정상소견

빛간섭단층촬영에서 비정상 소견은 형태 또는 반사도의 변화로 나타난다.

- 나이관련황반변성

    ![image](https://github.com/user-attachments/assets/2e5e6cf4-e660-45cb-b138-d1f7234066a6)

    - 나이관련황반변성에 의한 변화는 망막의 바깥층에서 가장 먼저 나타남.
    - 색소상피박리가 일어난 부분은 빛간섭단층촬영에서 망막색소상피층이 부드러운 경사로 들려 보이거나 물결모양으로 불규칙하게 들려보이기도 한다. 
    - 색소상피박리는 주로 빈 공간에 장액성 액체로 차 있으며,망막색소상피층 밑에 섬유화되어 융기된 회백색의 원형반흔을 형성하기도 한다.
    - 그 외 급성 병변의 경우 삼출성 변화에 의해 망막의 낭포성 변화나 장액성 망막박리 등이 동
    반되기도 함.

- 당뇨황반부종

    ![image](https://github.com/user-attachments/assets/c59759d1-ead9-43d8-82ef-2fa051391750)

    - 황반의 부종은 빛간섭단층촬영에서 황반의 두께가 두꺼워져 황반의 형태가 변형되는 것으로
    나타남. 
    - 빛간섭단층촬영을 통해 황반부종의 두께를 정량적으로 측정할 수 있다. 
    - 망막 내 저반사도의 낭포성 병변 또는 고반사도의 경성삼출물 등이 보이며, 하부에 음영효과 (shadowing)가 생긴다.

- 망막앞막

    ![image](https://github.com/user-attachments/assets/3a93883c-52d9-49c1-9360-8038c4a3db05)

    - 망막앞막은 망막표면을 덮고 있는 고반사도를 띤 선상 음영으로 보이며, 황반의 형태 변화를 동반하기도 한다.

- 황반원공

    ![image](https://github.com/user-attachments/assets/dc026398-cdb3-4c5d-8837-c0c9abef375b)

    - 황반원공은 황반 중심의 망막 결손으로 나타난다. 
    - 결손의 경계부는 감겨서 들려있거나 낭포성변화를 동반하고, 빛간섭단층촬영을 통해 수술 후 시력예후에 관한 정보인 원공의 크기 측정, 광수용체층의 결손 부위 등을 관찰이 가능.

- 망막박리

    ![image](https://github.com/user-attachments/assets/0c73b25f-e105-4168-a9b4-6625fe956a80)

    - 망막박리는 감각신경망막이 망막의 맨 아래 층인 망막색소상피층에서 분리된 것
    - 빛간섭단층촬영에서 박리된 망막이 뚜렷하게 관찰되며, 망막박리의 황반중심 침범 여부에 따라서 수술 후에 시력예후가 달라지므로 이를 확인하는 것이 중요
    - 또한 수술 후에 망막하액의 지속여부를 빛간섭단층촬영에서 확인할 수 있다 (위 사진: 황반중심 침범한 망막박리, 아래 사진:황반중심 침범을 하지 않은 망막박리).
 
## 6-4. 형광안저혈관조영 (Fluorescein Angiography, FA)

![image](https://github.com/user-attachments/assets/0bca08ba-f94a-4e6c-9f41-10741f4f504f)

- 플루레신 (flurescein)은 안과 영역에서 사용되는 형광색소로, 이를 정맥주사하여 혈류를 통해 안저순환에 이르면 조영장비로 형광을 유발하여 망막 순환계를 영상으로 기록 가능
- 형광안저혈관조영은 망막혈관질환의 진단 및 평가에 필수적인 검사
-  안저카메라의 촬영 범위가 넓어짐에 따라 광각안저사진과 같이 초광각 형광안저혈관조영술 (ultra-wide-field FA)이 주변부 혈관상태 평가에 유용하게 사용되고 있다.
- (그림) 정상 형광안저혈관조영 사진. 망막동맥 및 망막정맥 형광이 뚜렷하게 보인다.

### 6-4-1. 비정상소견

- 망막동맥폐쇄

    ![image](https://github.com/user-attachments/assets/7b0a0564-7837-4c44-93bb-6cd893a8a57a)

    - 망막동맥폐쇄의 안저사진에서 망막이 하얗게 혼탁되어 보이고 망막동맥은 가늘어진 소견이 보임(왼쪽). 
    - 망막동맥의 형광충만이 지연되고 폐쇄된 곳보다 더 말초부위로는 형광색소가 통과 되지 않으며, 형광이 충만되지 않은 폐쇄동맥은 맥락막의 형광에 대비되어 흑색으로 보임(오른쪽).
    - 망막혈관의 폐쇄는 색전, 혈전 등에 의해 발생하며, 전신질환과의 관련성에 대한 검사 필요

- 당뇨망막병증

    ![image](https://github.com/user-attachments/assets/e2d53960-5bb1-466d-bc51-f40a253999c9)

    - 당뇨망막병증은 망막혈관질환으로, 망막혈관의 누출과 폐쇄에 의한 구조변화를 형광안저조영을 통해 관찰하는 것이 중요
    - 초광각형광안저혈관조영을 통해 주변부 망막의 신생혈관이나 비관류부위를 보다 용이하게 파악할 수 있고, 당뇨망막병증의 치료 시기를 놓치지 않을 수 있음.
    - 당뇨망막병증에서 관찰되는 미세혈관류나 신생혈관 등은 이상혈관에 의한 과형광으로 보이며,
    모세혈관 비관류 부위는 모세혈관에 형광이 충만되지 않아 혈관의 지리적인 분포에 따른 저형광으로 나타남.

# 7. 의료영상데이터(내시경영상)

## 7-1. 내시경영상의 특수성


* 인체의 내부를 시각화하는 의료용 영상
    1. 엑스선 촬영
    2. 컴퓨터 단층촬영(CT)
    3. 자기공명영상(MRI)
    4. 초음파검사
    5. 내시경

내시경 검사를 통해 얻은 영상은 다른 검사 장비를 사용하여 촬영된 의료영상과 본질적으로 구분되는 특징을 가짐.

- 방사선이나 자기장을 활용한 검사 방법
    - 인체 조직 내부 구성 성분의 흡수율 차이를 가시화하여 인체 구조를 종 또는 횡단면으로 보여주는 2차원 영상이며
- 초음파 검사는 실시간으로 장기를 관찰한다는 점에서 내시경 검사와 유사하나 입체적인 장기를 2차원으로 스캔하여 관찰되는 영상을 판독
-  내시경 검사는 광원을 인체 내부로 삽입하고 빛을 조사하여 장기의 내벽을 실시간으로 관찰하는 방법으로, 위, 대장, 소장 등의 장기를 관찰할 수 있는 방법
- 또한 초음파, CT, MRI는 주로 고형 장기를 관찰하는 데 활용하며, 내시경 검사 중에는 장의 연동운동이나 관강 내의 공기 양에 따라 관찰 대상의 모양이나 위치가 달라질 수 있어 정형화된 영상을 얻기가 어렵다는 제한점이 있습니다. 

## 7-2. 내시경 검사의 특징


![image](https://github.com/user-attachments/assets/d98b8da1-137e-4c70-ac47-cd639cab248d)

- (A), 흉부 X선 영상 : 엑스선은 파장이 짧고 에너지가 커서 인체 조직을 투과하며 부분적으로 흡수됩니다. 따라
서 조직 내부의 구성 성분의 흡수율이 영상화된다고 할 수 있습니다.
- (B), 흉부 CT영상
- (C), 복부 초음파 영상 : 초음파 역시 매질이 변할
때마다 경계면에서 반사되는 특징을 활용하여 인체 내부 조직의 물성을 단면영상으로 가시화
합니다.
- (D), 위 내시경 영상 : 내시경은 광원을 포함한 검사 장치로서 인체 내부로 삽입한 다음 카메라와 같은 방식으로 인체 장기 내벽의 표면에서 반사된 빛을 영상화합니다. 즉, 관상 구조를 가진 장기의
내벽을 영상화하는 장치입니다.


- 내시경으로 관찰할 수 있는 소화관

    ![image](https://github.com/user-attachments/assets/b1a12565-75bd-4aa1-93ae-d2cc465c29b7)

    - 위, 대장, 소장 등입니다. 
    - 위내시경으로 인후두, 식도, 위,십이지장을 관찰
    - 대장내시경으로 소장 말단, 결장, 직장, 항문을 관찰
    - 소장은 소장내시경 또는 캡슐내시경으로 관찰
    
    ![image](https://github.com/user-attachments/assets/24902ea0-b923-4ee1-96cd-48cf26d4eb0b)
    
## 7-3. 소화관 내시경 스콥의 구조

![image](https://github.com/user-attachments/assets/1399144d-8ff9-47b9-ad34-d07e84726953)

- 내시경 스콥은 연결부, 조작부, 삽입부로 나눠집니다.
- 조작부 끝 10cm는 굴곡부로 조작부의 knob을 조절하여 상하좌우로 방향 조절을 하고, 조작부 말단은 대물렌즈, 광원렌즈, 노즐과 겸자공으로 구성
- 대부분 내시경 광원은 제논램프이며, 대물렌즈를 통해 화상을 CCD로 전달

## 7-4. 소화관 내시경 영상의 특징

![image](https://github.com/user-attachments/assets/b70cb53d-d32b-4d32-9836-5c55c728cbdc)

- 소화관의 구조는 크게 관(tubular) 구조와 주머니(sacular) 구조로 나뉩.
- 관 
    - 식도, 십이지장, 대장은 긴 관구조로 되어 있으며, 내시경의 끝에 달려있는 카메라가 긴 터널을 지나면서 상하좌우를 관찰하는 방식
- 주머니
    
    ![image](https://github.com/user-attachments/assets/351a2d33-de57-41af-a090-65160870cb31)

    - 반면 위는 주머니 모양의 구조라 공간이 넓어 내부에서 내시경을 반전하거나 회전시키는 등의 조작이 가능하므로 다양한 각도에서 관찰할 수 있음.

    ![image](https://github.com/user-attachments/assets/0fcba5a0-fb5c-42b9-ace9-882533e3c7f6)

    -  일반적인 소화관은 음식물이 없는 경우 연성을 가진 관 또는 주머니 구조의 장기가 눌러져 있어 위처럼 공간을 유지할 수 없습니다. 
    - 따라서 내벽을 촬영하기 위해서는 내시경 렌즈와 피사체(내벽) 사이에 공간이 필요하며, 검사 중 지속적으로 공기를 주입하여 공간을 만들어야 관찰이 가능


## 7-4. 내시경 영상 진단의 제한점
1. 소화관 장기의 특성에 따른 제한점
    - 첫째, 해부학적 구조로 인한 제한점
        - 관 구조로 되어있는 식도, 십이지장 및 대장을 관찰할 때는 카메라가 내시경 끝에 달여있기 때문에 항상 전진 방향으로의 관찰만 가능

        ![image](https://github.com/user-attachments/assets/aad33d7e-1f90-4d9e-a4fa-0e79d5682190)

        - 십이지장과 대장은 윤상의 주름이 있기 때문에 주름과 주름 사이를 빠짐없이 관찰해야 하는데, 내시경 조작의 제한으로 모든 부분을 관찰하기 어려운 경우가 종종 있음.
        
        ![image](https://github.com/user-attachments/assets/d9767496-9239-4c7a-9928-e81daf05d5fd)

        - 1.5 m 길이의 대장은 많은 굴곡으로 인해 맹점이 많이 생길 수 있으며
        - 검사 전 장정결이 완전하지 못한 경우 대변으로 인해 불완전한 검사가 될 수 있습니다.
        
        
    - 둘째, 소화관은 연동운동이라고 하는 소화운동을 하기 때문에 매 순간 모양이 변하는 특성을
    가지고 있습니다.
        - 정확한 관찰을 위해 내시경 검사 전 연동운동을 억제하는 약물을 주사하기도 하지만 연동운동을 완전히 억제하기는 힘들며, 

        ![image](https://github.com/user-attachments/assets/1b184aa0-3bc7-45ac-b561-debac31a836a)

        - 검사 중 피검사자가 트림을 하거나 공기를 반복적으로 배출하거나 협조가 되지 않아 내강이 충분히 부풀려지지 않으면 시야가 제한되므로 아무리 숙련된 의사라도 내강을 자세히 관찰하기 어렵습니다.


    - 셋째, 내시경 선단을 상하좌우로 조정하여 비교적 다양한 각도의 영상을 얻을 수 있지만, 정면
에서 관찰할 수 없는 카메라 주변부 영상은 얻을 수 없고, 카메라에서 먼 부분은 어두워서 잘 보이지 않는 등의 제한점이 있습니다.

2. 관찰자에 의한 제한점
    - 엑스선과 CT
        - 이미 획득하여 잘 정리된 정지 영상을 보고 의사가 판독을 하는 검사
        - 다시 말하면, 판독하는 의사 사이에 차이는 있을 수 있지만 영상 자체에는 차이가 없습니다
    - 내시경 검사 영상
        - 움직이는 장기를 실시간으로 관찰하면서 필요한 부분의 영상을 촬영하여 남기는 방식으로 획득하게 되며 검사를 시행하는 의사의 숙련도와 검사 환경 등에 영향 을 받을 수있습니다. - 즉, 검사 결과가 정형화되어 있지 않고, 같은 환자를 대상으로 같은 의사가 검사하였더라도 정확히 같은 영상을 얻기는 어렵습니다. 
        - 또한, 내시경 의사가 검사 중에 병변을 인지하지 못하는 경우도 있으며, 
        - 내시경 사진을 촬영하였더라도 병변을 인지하지 못하는 경우도 있을 수 있습니다. 
        - ex) 다양한 물건이 들어있는 방에 들어가서 관찰하고 나왔을때 그안의모든 물건을 관찰은 하였으나 전부 인지하지는 못하는 것처럼, 내시경 의사의 지식과 숙련도 뿐 아니라 검사를 하는 날의 컨디션, 전날의 업무량, 심리적 불안정, 내시경 방안에서 일어나는 다이나믹한 상황 등 다양한 환경이 병변의 발견율에 영향을 미칠 수가 있습니다.



# 8. 의료데이터(생체신호(병원 내 생체신호))

## 8-1. 생체신호의 정의 및 특징

- 생체신호란?
    - 영어로 “바이오시그널biosignal)“ 또는 ”바이탈사인(vital sign)“
    - 바이탈사인 :  “살아있다는 신호” 또는 “매우 중요한 신호”라는 중의적 의미
    - 즉,생명체의 생존 여부를 알려주는 매우 중요한 신호라는 의미.
    - 병원에서 사용하는 생체신호란?
        - “인체의 생체 현상을 다양한 센서의 침습적 또는 비침습적 방법으로 측정한 신호”라고 정의
        - 이 때 생체신호를 계측하는 도구가 바로 환자모니터
- 환자모니터를 통해 우리가 측정하는 생체신호는 몇 가지 특징이 있습니다.
    1. 측정된 신호의 크기가 매우 작다는 점. 
        - ex) 가슴을 통해 측정되는 심장의 전기적 움직임은 겨우 수 밀리볼트(mV)의 크기를 갖습니다. 
        - ex) 머리의 전극을 통해 측정되는 뇌파의 크기는 심장의 1/1000인 수 마이크로볼트(μV) 정도입니다. 
        - 이렇게 작은 전기적 신호는 환자모니터를 통해 증폭되고 노이즈가 제거되어 우리가 보는 심전도나 뇌파 형태로 보여지게 됩니다.
    2. 생체신호의 발생 기전이 매우 복잡. 
        - 우리가 팔에서 측정하는 혈압은 단순히 피가 흐르는 혈관벽의 압력을 측정하는 것이지만 혈관 압력이 만들어지기 위해서는 심장의 수축력, 신체의 혈액량, 혈관의 저항 등 다양한 요인이 관여. 
        - 혈압의 변화 예를 들면 저혈압이 생겼을 때 그 원인이 심장 기능의 감소인지 출혈에 따른 혈액량의 감소 때문인지 아니면 혈관의 이완 때문인지 그 원인을 찾기가 쉽지 않습니다.-
        - 환자모니터를 통한 생체신호는 단지 우리 몸의 이상이 발생하였다는 것을 보여줄 뿐이고 그 원인의 해석이나 치료법의 결정은 오롯이 의료진의 몫
    3. 생체신호는 외부 환경의 영향을 많이 받습니다. 
        - ex) 수술중 사용하는 전기소작기의 영향으로 심전도에 이상이 생겨 부정맥으로 오인되는
    일들은 매우 흔한 일
        - ex) 혈압을 재는 동안 혈압계가 외부로부터 눌리거나 하면 정확한 압력이 측정되지 않는 일


## 8-2. 생체신호의 종류

![image](https://github.com/user-attachments/assets/bccbad4e-1566-496e-8639-6bf269d920a2)

## 8-3. 생체신호모니터링

- 환자모니터
    - “센서를 이용해 환자의 생체신호를 지속적으로 취득하고 이를 디스플레이를 통해 보여주는 장치”로 정의
    - 이때 사용되는 센서들은 환자의 몸 표면에 부착하는 것이 대부분이고 일부는 몸 속에 임시로 집어넣는 것입니다.
    - 병원 내에서 측정되는 주요 활력징후는 심전도, 혈압, 호흡, 체온, 맥박산소포화도입니다. 

1. 심전도 (electcocardiography, ECG)
    - 심전도는 심장에서 발생하는 전기적 변화를 기록하는 장치. 
    - 심장의 전기적 자극은 동방결절(sinus node)에서 시작되어 심방을 거쳐 심실로 전도되며, 전기 자극이 전도되는 과정에서 심근이 이에 반응하여 수축을 하게 됩니다. 

    ![image](https://github.com/user-attachments/assets/3b26d499-4ad3-48d1-a6fd-be94c03747c4)

    - 심장의 전기적 자극이 제대로 전도되지 않거나 순서대로 전도되지 않으면 심장의 수축 기능의 이상을 가져오게 되며 이때의 심전도 소견을 부정맥(arrhythmia)라고 합니다. 

    ![image](https://github.com/user-attachments/assets/c16e8c19-d80b-402e-8fe5-3031887bd049)

    - 정상적인 심전도는 P파, QRS 복합체, T파의 세 성분으로 구성되며 비슷한 모양이 심박수만큼 일정하게 반복되는 양상을 보입니다.

    - 병원 내에서 시행하는 심전도 검사는 부정맥 또는 심근 경색을 진단하기 위한 검사
    
    ![image](https://github.com/user-attachments/assets/7d7e6208-e840-4942-9687-f68c5774fcf7)
    
    - 검사 방법에 따라 3극 심전도, 표준12유도 심전도, 홀터 심전계 등이 있음.
    - 3극 심전도
        - 심장을 중심으로 왼쪽 상지, 오른쪽 상지, 왼쪽 하지의 세 방향에 전극을 붙여서 감시하는 방법
        - 간편한 부착 방식과 3개의 전극만으로도 부정맥을 진단할 수 있는 유용성 때문에 수술실 또는 중환자실에서 지속적으로 환자 감시를 위해 사용
    - 표준12유도 심전도
        - 사지 전극 4개와 흉부 전극 6개를 붙여 심전도를 측정하는 방법
        - 다양한 종류의 부정맥의 진단이 가능
        - 심근 경색, 심비대 등의 다양한 심질환을 진단할 수 있는 방법
        - 일반적으로 건강검진, 수술전 검사, 정밀 검사의 목적으로 사용
    - 홀터심전도계
        -  7개의 전극과 연결된 연속기록장치를 휴대하면서 환자의 일상 생활동안 최소 1일 이상의 지속적인 심전도 기록을 하기 위해 사용 
        - 간헐적으로 발생하는 부정맥을 진단하기 위한 방법
    - 웨어러블 장치를 이용해 측정하는 방법
        - 보통 가슴에 붙이는 패치나 손목형 장치를 이용하여 1극 심전도를 측정하는데, 부정맥의 진단에 도움이 되는 것으로 알려져 있으나 아직 병원 내에서 환자 감시에 적용되는 의료용 웨어러블 심전도 장치는 거의 없습니다.
 
2. 혈압 (blood pressure, BP)
    - 혈관을 흐르는 혈액이 혈관벽에 가하는 압력

    ![image](https://github.com/user-attachments/assets/b1485fd4-e47f-49ea-ba4a-0d52e0020fc2)

    - 매 심박수마다 심장은 수축과 이완을 반복하는데 이에 따라 심장에서 나와 동맥을 흐르는 피는 압력의 변화를 보이는데, 가장 높은 압력인 수축기압과 가장 낮은 압력인 이완기압이 반복해서 나타납니다.

    
    ![image](https://github.com/user-attachments/assets/f729d991-3860-45d0-aaa2-1196f6323661)

    - 혈압측정방법
        1. 비침습적 방법
            - 일반적 측정하는 혈압은 상완 동맥에서 측정한 비침습적 동맥압입니다. 
            - 이를 측정하기 위해서는 상완에 22-24cm 정도 길이의 커프를 감고 커프에 압력을 가했다가 서서히 풀면서 동맥압의 혈류가 사라졌다가 나타나는 소리를 듣거나 진동의 변화를 자동으로 측정하는 방법을 씁니다. 
            - 이 방법은 간편한 측정이 가능한 반면에 측정하는 사람이나 측정 부위, 커프 크기 등에 따라 오차가 생길 수 있으며 1회 측정에 1분 가까운 시간이 소모되는 것이 단점
            - 환자모니터에서는 최소 1분 이상의 간격으로 반복적인 측정이 가능하여 지속적인 환자 감시가 가능하지만 너무 잦은 측정은 측정 부위의 통증이나 부종을 유발할 수 있으므로 피하는 것이 좋습니다.
        2. 침습적 방법
            - 심혈관계가 불안정하여 지속적인 혈압감시가 필요하거나 또는 인공호흡 치료를 받으며 반복적인 동맥혈 검사가 필요한 수술환자, 중환자 등에서는 침습적 동맥압을 측정
            - 주로 요골 동맥에 동맥관을 넣고 이를 압력계에 연결하여 실시간으로 압력의 변화를 측정하는 방법
            - 압력의 변화를 실시간으로 감시하여 저혈압을 빠르게 진단할 수 있을 뿐만 아니라
            동맥관을 통해 채혈함으로써 잦은 혈관 천자를 피할 수 있는 장점이 있습니다. 
            - 그러나, 침습적 동맥압 감시에 필요한 비용과 수고, 환자의 불편함 등의 문제로 꼭 필요한 경우에만 시행하고 있습니다.
            
3. 호흡 (respiration)

    - 호흡 측정의 기본적인 방법은 흡기와 호기 시 환자의 가슴과 배의 움직임을 관찰하는 것이며
    1분당 호흡수로서 표시. 
    - 자발 호흡의 경우 분당 15-20회 정도가 정상이며 이보다 적거나 많은 경우 그 원인을 찾고 처치 필요

    - 수술실이나 중환자실에서 환자모니터를 통해 호흡 수를 측정하는 방법

    1. 하나는 심전도를 이용하는 방법이
        -  심전도 전극을 흉부에 붙여 호흡시 가슴의 움직임에 따라 발생하는 전극의 전위차 변화를 측정하여 호흡수를 계산하는 방법
    2. 호기시의 이산화탄소를 측정하는 방법
        - 기계환기를 하는 경우에는 호흡회로에 연결된 가스 채취관을 통해 연결된 이산화탄소 측정기(capnography)를 통해 환자의 호기 동안의 이산화탄소의 농도 변화를 측정할 수 있고 이로부터 분당 호흡수를 자동으로 계산
        
            ![image](https://github.com/user-attachments/assets/a26bb607-b10a-4cd5-b7fb-70da4b0ca6c1)

            - 이산화탄소 측정기는 호흡수 뿐만 아니라 고탄산혈증, 무기폐 등 환자의 이상을 알려주기도 하는 유용한 장비이지만 고가의 장비이므로 병원의 경제적 부담이 있습니다
    
4. 체온 (body temperature, BT)

    - 체온 조절 중추는 중심 체온이 36.5-37도로 유지되도록 작동
    - 중심체온이 이보다 낮아지면 체온을 올리기 위해서 떨림이 증가하고 땀 생산이 감소
    - 체온이 증가하면 열을 배출하기 위해 피부 온도가 증가하고 땀 배출이 증가. 
    - 중심 체온의 변화를 측정하기 위한 방법
        1. 직장, 식도 등의 부위에서 측정을 해야 하지만 이러한 부위에서의 측정은 쉽지 않습니다. 
        2. 이를 대신하여 깨어 있는 환자에서는 구강, 고막, 겨드랑이 체온을 측정하고 보정하는 방법을 사용. 
        
            ![image](https://github.com/user-attachments/assets/54f771c0-7247-4d28-9b21-f08b5f98e62d)

            - 수술 환자 등의 경우는 보다 겨드랑이 체온계 또는 중심 체온에 보다 가까운 값을 측정할 수 있는 방광 내 체온계, 중심정맥 카테터 온도계, 식도 체온계 등의 다양한 방법을 사용하여 반복적이고 지속적인 체온 측정을 시행. 
            - 이 때 다양한 종류의 체온계들은 규격에 맞는 커넥터를 통해 환자모니터로 신호를 전달
5. 맥박산소포화도 (percutaneous oxygen saturation, SpO2)
    
    - 동맥혈 속의 산소화 정도를 보여주는 장치.


    ![image](https://github.com/user-attachments/assets/f853e762-a2f2-49cc-9c0c-09f116647830)

    - 손가락에 부착하는 센서에서 두 가지 파장의 빛을 손가락에 투과시키켰을 때 산소화/비산소화 헤모글로빈의 비율에 따라 각각의 빛이 투과되는 정도가 달라지는 원리를 이용하여 측정
    - 정상치는 95-100%
    - 90% 이하로 감소하였을 때 치료가 필요한 저산소증이 발생한 것으로 생각. 
        - 이 수치는 산소 투여를 통해 개선될 수 있으며 산소 투여에도 불구하고 폐를 통한 산소화가 원활하지않다면 기관내 삽관을 통한 인공환기나 ECMO의 사용을 고려하게 되는 중증의 상태라 할 수 있음. 
        - 또한 이 장치를 통해 맥박수를 측정할 수도 있어 심전도를 통한 심박수 측정이 원활하지 않다면 대안으로 사용
        - 저산소증에 대해 저렴하고, 지속적이면서, 빠른진단을 가능하게 하므로 병원에서 환자감시의 필수 항목이 됨


# 9. 의료데이터(생체신호(라이프로그))

- 라이프로그 정의
    - 넓은 의미에서 개인의 전반적인 일상새활의 기록이나 정보를 의미
    - 환자의 상태를 비츰습적으로 실시간으로 파악할 수 있는 자료
    - (병원환경) 환자감시장치(Patient Monitor) : 환자의 생체신호를 지속적으로 모니터링하여 실시간으로 제공.
    - (일상생활) 개인화된 센서장비를 통해 사용자 스스로 생산하는 의료데이터(PGHD, Patient Generated Health Data)
        - Apple watch를 사용한 심방세동 연구(2019.NEJM 출간)
        - apple watch를 통해 40만명 이상이 참가
        - ECG(electrocardiography)데이터를 통해 심박세동에 대한 판별이 가능하다는 결과를 제시

## 9-1. 라이프로그 데이터의 종류와 특성

- 라이프로그 동기 

    1. 정밀산 센서 기술의 발달

        ![image](https://github.com/user-attachments/assets/3710f3df-5b22-426f-8606-495dc7ffea52)

        - 다양한 생체신호를 측정할 수 있는 장비의 발달로 인하여, 기존보다 훨씬 더 지속적이고, 깊은 자료를 수집할 수 있게 되었다.
    2. 자료 저장하기 위한 저장장치의 가격 저하
    
        ![image](https://github.com/user-attachments/assets/92d66c1f-37bf-4f52-9c0d-5ca2ca73e12d)

        - 2015년 연구결과에 따르면 인간이 수집하는 자료중 일상생활, 환경적 자료에 다른 자료에 비해 엄청난 데이터 용량을 요구하고, 일생동안 생산되는 데이터는 1100 TB라고 한다. 
        - 이는 저장 장치의 가격 저하가 아니라면, 해당 자료 수집/활용은 어려운 일이다.
    3. 사용자들의 인식변화
        - 스스로의 일상을 기록하는 것에 대한 관심이 증가했고, 정보의 지식의 공유하는 문화의 발달로 인하며 좀더 많은 라이프로그 데이터가 생산되고 있음.

## 9-2. 의학에서의 라이프로그

![image](https://github.com/user-attachments/assets/312e1184-963b-4de8-b92d-ca56c476d508)

- 환자생성의료데이터 (Patient Generated Health Data; PGHD)로 볼수 있고, PGHD는 점차 확산되는 추세.
- 특히  2021년은 PGHD가 점차 증가되는 추세에 속합니다. 이 시기에는 환자들이 본인이 생산하는
PGHD를 의사나 연구자에게 공유하기를 기대하고, 이러한 PGHD를 수집, 사용, 공유하는 상호
운용성 표준이 점차 도입되는 시기


- 의학에서의 라이프로그 적용 사례

    ![image](https://github.com/user-attachments/assets/5f781a00-ff20-4bf0-9547-693f840b774f)

    - 의학에서의 라이프로그는 비침습적으로 환자의 생체신호를 측정해서 남기는 기록
    - 2016년에 미국의료정보학회지(Journal of America Medical Informatics Association; JAMIA)에 소개됨.
    - 1형 당뇨는 인슐린 저항성이 생겨 발생하는 2형 당뇨와 달리 면역체계가 인슐린을 생성하는 췌장의 베타세포를 공격해 인슐린을 생산하지 못하게 만드는 일종의 자가면역질환
    - 1형 당뇨는 완치되지 않고 평생 관리해야 하는 만성질환이고, 체내에 인슐린이 생성되지 않거나 소량으로 만들어지기 때문에 혈당관리와 인슐린 관리를 하여야한다. 
    - 2016년에 출간된 논문에서는 이러한 소아1형당뇨 아동 대상으로 DEXCOM 이라는 지속혈당측정기를 사용하여, 아동의 혈당을 수집하여, Stanford hospital의 의사에게 전달하여, 해당 환아의 혈당 관리를 해서, 환자 안전성을 획기적으로 높인 연구
    -  이러한 연구결과를 기반으로 최근 미국 당뇨학회에서는 모든 당뇨환자들에게 혈당관리를 위해서 지속혈당측정기를 착용하는 것을 권고
    
# 10. 의료데이터(EMR데이터(정형데이터-질병코드,약품코드))

## 10-1. 전자의무기록 (Electronic Medical Record, EMR)

- 의료진이 구체적으로 기록을 컴퓨터로 기입하고 이를 손쉽게 조회하는 시스템
- EMR은 기존 종이차트에 기록했던 인적사항, 병력, 건강상태, 진찰, 입퇴원기록 등 병원에서 발생하는 환자 기록을 모두 전산화한 시스템
- EMR에는 무수히 많은 환자의 기록이 작성되어 있기 때문에, 의료 빅데이터에서 매우 큰 축을
담당하는 영역
- ‘전자건강기록 (Electronic Health Record, EHR)’
    - EHR은 EMR에서 조금 더 발전된 형태인데, EMR과의 가장 큰 차이는 상호운용성(interoperability)
    - 헬스케어 분야에서 상호운용성이란, 전자적으로 저장된 의무기록과 건강기록을 다른 헬스케어 환경 혹은 시스템끼리 원활하게 교환과 공유가 가능한 상태를 의미
    - EHR = EMR 이라고 생각하면 된다.

- EMR의 기능
    - 환자를 치료하는 과정에서 다양한 ‘처방 (order)’을 생성하고 전달하며 조회하는 기능
    - EMR은 의무기록(Medical Record)를 작성하고 조회하는 기능을 수행
        - 의무기록의 종류 : 초진기록지, 재진기록지, 수술기록지, 간호기록지, 임상관찰기록지, 퇴원기록지 등
        - 대개 의무기록은 구조화된 형태로 데이터를 입력하는 것과 자유서술문이 혼용되어 구성
        - ex) 이 환자의 흡연 상태를 4가지의 보기 (현재 흡연 중, 과거에 흡연했으니 현재는 흡연하지 않음, 힌 번도 흡연한 적이 없음, 알 수 없음) 중 하나를 선택해서 정보를 기입하는 경우가 구조화된 데이터를 입력하는 것
        - ex) 자유서술문은 의사가 환자를 진찰하는 과정에서 관찰한 것들을 자유롭게 작성한 것.

    - EMR의 중요한 기능
        1. 청구 : 의료 행위에 대하여 보험자에 진료비를 요청하는 것
        2. 수납 :  환자의 자기부담금을 납부하는 것
    
- 의료보험의 지불체계

    ![image](https://github.com/user-attachments/assets/7d0e9b51-47b1-4f9e-8d22-54d932a3e804)

    - 보험자,보험가입자, 의료공급자 이렇게 세 주체들 간에 이루어지는 돈의 흐름
    - 보험자 
        - 보험제도 운영 주체
        - 국가 별로 차이 있음.
        - 우리나라의 경우에는 국가에서 운영하는 단일보험체계 (국민건강보험) 로 구성이 되어 있고, 미국 등의 나라는 다양한 보험자가 존재하기도 함.
    - 보험가입자
        - 일반인/환자와 같은 의료수요자 해당
        - 보험자의 보험에 가입하고 이에 따라 보험료를 납부
    - 의료공급자
        - 병원과 약국에 해당. 
        - 의료서비스를 수요자에게 제공
        - 이떄, 수요자가 가입한 보험자에 의료공급자는 진료
        - 진료비를 청구하는 과정에서 병원은 해당 수요자에게 어떤 처방을 내리고 이에 대한 의료행위를 수행한 내용을 자세하게 정리하여 보험자에 전달하게 됨.
        - 그러면 보험자는 이를 심사평가하여 진료비를 다시 공급자에게 지급하게 됩니다. 
        - 우리나라의 경우에는 건강보험심사평가원에서 이를 심사합니다.
    
    ![image](https://github.com/user-attachments/assets/85a5665c-2768-46e5-bcbc-eb69e885d0e8)

    - 보험자는 공급자가 수행한 의료행위를 객관적으로 살펴보아야 하기 때문에, 
    - 국가에서는 각 진료행위에 대해 일종의 ‘코드’로 이를 표현
    - 그리고 병원, 약국과 같은 의료서비스 공급자는 진료비 청구를 하기 위해 어떤 행위를 했는지를 이 ‘코드’로 표현하여 보험자에게 전달



## 10-2. EMR 내 정형데이터 관련 주요 코드
- 진단명/진단코드
    - 진단명은 의사가 환자에 대해 판단한 질병명 등을 작성한 것
    - 국제적으로 이 진단명은 세계보건기구 (World Health Organization, WHO)에서 제정하여 발표하는 국제질병분류(International Classification of Disease), 줄여서 ICD라는 체계를 주로 사용
    - 우리나라에서는 WHO의 ICD 체계를 골격으로 하면서 대한민국 실정에 맞게 일부 변경된 한국표준질병사인 분류 (Korean Standard Classification of Disease), 줄여서 KCD라는 체계를 사용
    - KCD 체계는 통계청에서 운영 및 개정을 담당
    - KCD와 ICD에 세부 코드내용은 크게 차이가 없다
    - ex) 당뇨병성 백내장을 동반한 2형 당뇨병

        ![image](https://github.com/user-attachments/assets/c2b0761b-4555-4d88-b192-eb9e54e70179)

- 건강보험 요양급여 비용코드
    - 건강보험심사평가원(심평원)에서 진행
    - EDI코드
        - 요양급여 비용코드를 의료 현장에서 주로 쓰는말,
        - EDI란 본래 전자문서교환(Electronic Data Interchange)라는 의미인데, 실제로는 거의 고유명사처럼 EDI코드라고 사용.
        - 건강보험에서 요양급여에 해당하는 모든 진료행위, 사용되는 도구, 의약품 등이 모두 정의

- 의약품 관련 코드
    - 처방되는 의약품의 표준코드
    - 유통되는 의약품은 모두 식품의약품안전처의 인허가를 받은 것들이며, 고유의 번호가 존재
    - 의약품 표준코드 (Korea Drug Code, KD코드)를 사용하는 것이 의무화

    ![image](https://github.com/user-attachments/assets/7ff4e4e0-3fe0-4f22-aea2-b04f571b6ae1)

    - KD코드는 총 13자리로 구성
    - 맨 앞 3자리는 국가식별코드
    - 4자리는 제약사
    - 5자리는 품목
    - 1자리는 검증번호코드
    - KD코드 중 중간의 제약사식별코드(4자리)와 품목코드(5자리)는 건강보험 급여에 등재된 EDI코드로도 활용

    - ATC코드 : ATC (Anatomical Therapeutic Chemical Classification System) 
        - 세계보건기구(WHO)에서 출판하는 코드체계
        - 약물이 작용되는 장기나 계통 (예를 들어, 심혈관계, 근골격계, 신경계, 항종양제 및 면역조절제 등), 그리고 화학적 특성에 따라 세분화
        - ex) 진통제인 존슨앤존슨의 타이레놀은 제품명이며 실제 약물성분은 아세트아미노펜
        - 아세트아미노펜은 ATC 코드로 N02BE01이라는 코드를 갖습니다. 
        - 유한양행의 타나센정이라는 제품도 아세트아미노펜성분을 갖고 있기 때문에 같은 ATC코드를 갖습니다. 
        - 두 약물의 KD코드(혹은 청구를 위한 EDI코드) 는 다름


- 수술/처치코드
    - ICD-9-CM (International Classification of Disease, 9th Revision, Clinical Modification)을 표준체계로 사용
    - ICD-9-CM은 신경계통 수술, 눈 수술 등 총 18개의 대분류로 현재 구성
    

- 그외 국제적 사용되는 의료용어컨셉 및 코드
    - SNOMED CT (Systemized Nomenclature Of MEDicine– Clinical Terms)
        - SNOMED CT는 다양한 국가에서 채택한 의료용어컨셉 체계이며 건강정보의 교류 등에 사용
    - RxNorm
        - 미국에서 약제코드로 사용
        
        
## 10-3. EMR 정형데이터의 구성

- 인구통계학적 정보 및 기초임상정보
    1. 성별
    2. 생년월일 (개인정보 가명화 측면에서는 일자를 제외한 생년월만 활용)
    3. 거주지
    4. 키 및 몸무게
    5. 혈압(최대혈압/최소혈압), 키, 몸무게 등이 측정된 일시
    6. 가족력
    7. 흡연여부 및 흡연량
    8. 음주여부 및 음주량 


- 진단정보 : 환자의 질환군을 정의하는 데에 있어 매우 중요한 정보
    1. 진단명과 진단코드
    2. 진단일자
    3. 진단분류 (주진단 또는 부진단 여부)
    4. 진단명을 작성한 진료과 등
    5. 환자 별로 특정 진단명에 대해 최초진단일자가 언제인지
    6. 환자 별로 특정 진단명에 대해 최초로 진단받았을 때의 나이

- 약제정보 : 약제처방과 관련된 정보가 있고, 입원한 환자의 경우 투약한 정보가 기록
    - 약제 처방 및 투약 관련 변수
        1. 약물명과 코드 혹은 약물성분명 코드
        2. 1일 기준 총 용량과 총 수량
        3. 용량 단위와 수량 단위
        4. 처방 기간
        5. 제형(경구용, 주사용, 외용)
        6. 약제처방을 내린 진료과 등
- 수술정보 : 수술에 대한 처방정보와 상세 수술기록
    - 수술 처방정보 
        1. 수술일자
        2. 수술처방명과 코드
        3. 수술을 집도한 진료과 등
    - 상세 수술기록 정보
        1. 수술일자
        2. 수술명과 코드
        3. 수술 전 진단
        4. 수술 후 진단
        5. 수술 중 환자의 생체신호 (체온, 혈압, 호흡 수)
        6. 수술 중 투약된 약제 (마취제, 혈압하강제 등)의 투약정보
        7. 수술기록 
    - 생체신호 : 실시간으로 측정됨.
    - 수술기록의 경우 텍스트로 작성 + 완전 자유서술문으로 작성되어 있거나 자체적인 정형화된 형식임
 
- 검사정보 : 진단검사, 영상검사, 병리검사, 기능검사, 내시경검사 등 다양하게 존재

    - 진단검사
        - 혈당, 콜레스테롤, 혈색소(헤모글로빈) 등에 해당
        1. 검사명 및 코드
        2. 검사 처방일시, 실제 검사일시
        3. 검사를 처방한 진료과
        4. 검사결과
            - 검사 종류에 따라 숫자로 작성되는 경우도 있음
            - 반응이 나타났는지의 여부 (positive 또는 negative) 가 기록되는 경우도 있음
        5. 검사결과단위 등
        
    - 기능검사 : 심초음파, 녹내장검사, 청력검사, 뇌파검사 등 매우 다양한 종류가 존재
        - 기능검사 또한 결과기록지에서 필요한 정보를 추출하여 연구에 활용 가능

# 11. 의료데이터(EMR데이터(비정형텍스트-의사소견서,간호노트))

## 11-1. MIMIC-III의 비정형 텍스트 데이터

- MIMIC-III의 정형 데이터 및 비정형 텍스트 사이의 관계
    - MIMIC-III의 비정형 텍스트와 정형 텍스트는 일부 정보를 제외하면 표현하는 정보가 다름.
    - 정형 텍스트   
        - 중환자실에 입원해있는 동안 발생한 측정값들을 관계형 데이터베이스(표)로 기록함.
        - 비정형 텍스트는 입, 퇴원을 비롯하여 환자의 전반적인 정보와 중환자실 입원 중 발생하는 정보 중 관계형 데이터베이스로 표현될 수 없는 정보들을 기록함.

- 비정형 텍스트의 분류 및 분포
    - MIMIC-III는 15가지 종류의 비정형 텍스트를 제공함
        1. 퇴원 요약지(Discharge summary)
        2. 초음파 검사 결과(Echo)
        3. 심전도 검사 결과(ECG)
        4. 간호사 기록지 (Nursing, Nursing/other)
        5. 내과 검사 결과 (Physician)
        6. 방사선 검사 결과(Radiology)
        7. 재활 서비스 관련(Rehab Services)
        8. 사례 관리(Case management)
        9. 호흡기 검사결과(Respiratory)
        10. 환자 상담 기록(Consult)
        11. 사회 복지(Social Work)
        12. 영양(Nutrition)
        13. 기타(General)


## 11-2. MIMIC-III 임상 기록 세부 분석

- 퇴원 요약지

    ![image](https://github.com/user-attachments/assets/c190cbf5-c90e-4a65-95fc-57d8f4cd9f29)
    
    - 비정형 텍스트를 이용한 의료 인공지능 연구들이 가장 보편적으로 사용하는 데이터.
    - 환자 개인 정보, 과거 병력, 진료 코스 및 퇴원 기록을 포함함.
    - 퇴원 요약지에는 다양한 정형 데이터와 연결될 수 있는 정보들이 수록되어 있음. 
    - ex) 환자 개인 정보와 입퇴원관련 기록은 입원(Admissions), 환자(Patients), 서비스(Services) 테이블과 연결될 수 있음.

- 정형 데이터와 관련 있는 검사 결과
    - ex) 내과, 호흡기, 영양 검사 결과가 이 분류에 속함

    ![image](https://github.com/user-attachments/assets/f677c53e-aded-405f-a1ed-29e18fbd99ab)

    - 내과 검사 결과에는 24시간 이내에 발생한 모든 측정값(정형 데이터)과 의사 소견(비정형 텍스트)가 기재되어 있음. 
    - MIMIC-III에 존재하는 정형 데이터와 비정형 텍스트 사이를 연결하는 역할을 할 수 있음.
    - 부록으로 인해 중복된 노트들이 등장함.
        - 퇴원 요약지와 다르게 특정 입원 환자만 검사 결과 노트를 가지고 있음.

- 정형 데이터와 관련이 적은 검사 결과
    - 이미지, 파형 등 텍스트와 쌍을 이루는 비정형 데이터들
        - 대부분의 텍스트가 방사선 임상 기록지이며, 초음파, ECG 순으로 텍스트 수가 적어짐.
        
        
- 단, 해당 데이터들을 쌍을 이루는 비정형 데이터와 함께 사용하고 싶은 경우
    - MIMIC-III만으로는 불가능함. 
    - MIMIC-III는 비정형 텍스트와 정형 데이터만 배포
    - 다른 데이터셋 (이미지의 경우 [MIMIC-CXR](https://physionet.org/content/mimic-cxr/2.0.0/))
    - 심전도의 경우 [MIMIC-III Waveform](https://physionet.org/content/mimic3wdb/1.0/)
    데이터베이스를 사용해야 함.

- 간호사 기록지
    - 간호 의료인에 의해 기록된 정보들
    - MIMIC-III의 차트(Chartevent) 테이블가 비정형 텍스트로 표현된 경우가 다수임.
    - Nursing 노트는 고정된 포맷을 지켜 작성
    - Nursing/others는 포맷 없이 자유롭게 작성된 것이 특징
 
 ---
 
 
 [맨 위로 이동하기](#){: .btn .btn--primary }{: .align-right}